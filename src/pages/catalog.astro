---
import { useState, useEffect } from 'react';
import axios from 'axios';
import ProductCard from '../components/ProductCard.astro';

const [products, setProducts] = useState([]);

useEffect(() => {
  async function fetchProducts() {
    const res = await axios.get('/api/products');
    setProducts(res.data);
  }
  fetchProducts();
}, []);
---

<h1>Product Catalog</h1>
<section>
  {products.map((product) => (
    <ProductCard product={product} />
  ))}
</section>
