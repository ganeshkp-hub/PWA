---
import axios  from "axios";

const { product } = Astro.props;
async function addToCart(productId) {
  const token = localStorage.getItem('token');
  await axios.post('/api/cart/add', { productId }, {
    headers: { Authorization: `Bearer ${token}` }
  });
}
---

<div>
  <img src={product.image.url} alt={product.title} />
  <h3>{product.title}</h3>
  <p>{product.price}</p>
  <button onClick={() => addToCart(product.id)}>Add to Cart</button>
</div>
